„%
XC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Controllers\LoginController.cs
	namespace

 	
TheRoadWarrior


 
.

 
Controllers

 $
{ 
[ 
ApiController 
] 
[ 
Route 

(
 
$str 
) 
] 
public 

class 
LoginController  
:! "
ControllerBase# 1
{ 
readonly !
ReservationsDbContext &
Database' /
;/ 0
public 
LoginController 
( !
ReservationsDbContext 4
db5 7
)7 8
{ 	
Database 
= 
db 
; 
} 	
[ 	
HttpPost	 
( 
$str  
)  !
]! "
public  
LoginResponseWrapper #
Get$ '
(( )
LoginRequest) 5
request6 =
)= >
{ 	 
LoginResponseWrapper  
rsp! $
=% &
new' * 
LoginResponseWrapper+ ?
(? @
)@ A
;A B
if 
( 
request 
. 
Create 
) 
{ 
String 
	loginHash  
=! "
BCrypt# )
.) *
Net* -
.- .
BCrypt. 4
.4 5
HashPassword5 A
(A B
requestB I
.I J
PasswordJ R
)R S
;S T
String 
apiKey 
= 
BCrypt  &
.& '
Net' *
.* +
BCrypt+ 1
.1 2
HashPassword2 >
(> ?
request? F
.F G
PasswordG O
+P Q
requestR Y
.Y Z
UsernameZ b
)b c
;c d
String 
reservationHash &
=' (
BCrypt) /
./ 0
Net0 3
.3 4
BCrypt4 :
.: ;
HashPassword; G
(G H
requestH O
.O P
UsernameP X
)X Y
;Y Z
try 
{   
Database!! 
.!! 
CreateTravellerUser!! 0
(!!0 1
apiKey!!1 7
,!!7 8
reservationHash!!9 H
,!!H I
	loginHash!!J S
,!!S T
request!!U \
.!!\ ]
Username!!] e
)!!e f
;!!f g
rsp"" 
."" 
ResponseCode"" $
=""% &
$num""' *
;""* +
rsp## 
.## 
Description## #
=##$ %
$str##& *
;##* +
rsp$$ 
.$$ 
ApiKey$$ 
=$$  
apiKey$$! '
;$$' (
rsp%% 
.%% 
ReservationKey%% &
=%%' (
reservationHash%%) 8
;%%8 9
}&& 
catch&& 
{'' 
rsp(( 
.(( 
ResponseCode(( $
=((% &
$num((' *
;((* +
rsp)) 
.)) 
Description)) #
=))$ %
$str))& @
;))@ A
}** 
}++ 
else++ 
{,, 
try-- 
{.. 
var// 
usr// 
=// 
Database// &
.//& '
GetUser//' .
(//. /
request/// 6
.//6 7
Username//7 ?
)//? @
;//@ A
if00 
(00 
BCrypt00 
.00 
Net00 !
.00! "
BCrypt00" (
.00( )
Verify00) /
(00/ 0
request000 7
.007 8
Password008 @
,00@ A
usr00B E
.00E F
	LoginHash00F O
)00O P
)00P Q
{00R S
rsp11 
.11 
ResponseCode11 (
=11) *
$num11+ .
;11. /
rsp22 
.22 
Description22 '
=22( )
$str22* .
;22. /
rsp33 
.33 
ApiKey33 "
=33# $
usr33% (
.33( )
ApiKey33) /
;33/ 0
rsp44 
.44 
ReservationKey44 *
=44+ ,
usr44- 0
.440 1
ReservationHash441 @
;44@ A
}55 
}66 
catch77 
{88 
rsp99 
.99 
ResponseCode99 $
=99% &
$num99' *
;99* +
rsp:: 
.:: 
Description:: #
=::$ %
$str::& ?
;::? @
};; 
}<< 
return== 
rsp== 
;== 
}>> 	
}?? 
}@@ Óú
iC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Data\Migrations\20210329073407_InitialCreate.cs
	namespace 	
TheRoadWarrior
 
. 
Data 
. 

Migrations (
{ 
public 

partial 
class 
InitialCreate &
:' (
	Migration) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{		 	
migrationBuilder

 
.

 
CreateTable

 (
(

( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 <
,< =
nullable> F
:F G
trueH L
)L M
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
type+ /
:/ 0
$str1 :
,: ;
nullable< D
:D E
falseF K
)K L
. 

Annotation #
(# $
$str$ :
,: ;
true< @
)@ A
,A B
ApiKey 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 >
,> ?
nullable@ H
:H I
trueJ N
)N O
,O P
	LoginHash 
= 
table  %
.% &
Column& ,
<, -
string- 3
>3 4
(4 5
type5 9
:9 :
$str; A
,A B
nullableC K
:K L
trueM Q
)Q R
,R S
Discriminator !
=" #
table$ )
.) *
Column* 0
<0 1
string1 7
>7 8
(8 9
type9 =
:= >
$str? E
,E F
nullableG O
:O P
falseQ V
)V W
,W X
ReservationHash   #
=  $ %
table  & +
.  + ,
Column  , 2
<  2 3
string  3 9
>  9 :
(  : ;
type  ; ?
:  ? @
$str  A G
,  G H
nullable  I Q
:  Q R
true  S W
)  W X
}!! 
,!! 
constraints"" 
:"" 
table"" "
=>""# %
{## 
table$$ 
.$$ 

PrimaryKey$$ $
($$$ %
$str$$% /
,$$/ 0
x$$1 2
=>$$3 5
x$$6 7
.$$7 8
Id$$8 :
)$$: ;
;$$; <
}%% 
)%% 
;%% 
migrationBuilder'' 
.'' 
CreateTable'' (
(''( )
name(( 
:(( 
$str(( 
,(( 
columns)) 
:)) 
table)) 
=>)) !
new))" %
{** 
Id++ 
=++ 
table++ 
.++ 
Column++ %
<++% &
int++& )
>++) *
(++* +
type+++ /
:++/ 0
$str++1 :
,++: ;
nullable++< D
:++D E
false++F K
)++K L
.,, 

Annotation,, #
(,,# $
$str,,$ :
,,,: ;
true,,< @
),,@ A
,,,A B
UserId-- 
=-- 
table-- "
.--" #
Column--# )
<--) *
int--* -
>--- .
(--. /
type--/ 3
:--3 4
$str--5 >
,--> ?
nullable--@ H
:--H I
true--J N
)--N O
,--O P
TripName.. 
=.. 
table.. $
...$ %
Column..% +
<..+ ,
string.., 2
>..2 3
(..3 4
type..4 8
:..8 9
$str..: @
,..@ A
nullable..B J
:..J K
true..L P
)..P Q
,..Q R
TravellerUserId// #
=//$ %
table//& +
.//+ ,
Column//, 2
<//2 3
int//3 6
>//6 7
(//7 8
type//8 <
://< =
$str//> G
,//G H
nullable//I Q
://Q R
true//S W
)//W X
}00 
,00 
constraints11 
:11 
table11 "
=>11# %
{22 
table33 
.33 

PrimaryKey33 $
(33$ %
$str33% /
,33/ 0
x331 2
=>333 5
x336 7
.337 8
Id338 :
)33: ;
;33; <
table44 
.44 

ForeignKey44 $
(44$ %
name55 
:55 
$str55 >
,55> ?
column66 
:66 
x66  !
=>66" $
x66% &
.66& '
TravellerUserId66' 6
,666 7
principalTable77 &
:77& '
$str77( /
,77/ 0
principalColumn88 '
:88' (
$str88) -
,88- .
onDelete99  
:99  !
ReferentialAction99" 3
.993 4
Restrict994 <
)99< =
;99= >
table:: 
.:: 

ForeignKey:: $
(::$ %
name;; 
:;; 
$str;; 5
,;;5 6
column<< 
:<< 
x<<  !
=><<" $
x<<% &
.<<& '
UserId<<' -
,<<- .
principalTable== &
:==& '
$str==( /
,==/ 0
principalColumn>> '
:>>' (
$str>>) -
,>>- .
onDelete??  
:??  !
ReferentialAction??" 3
.??3 4
Restrict??4 <
)??< =
;??= >
}@@ 
)@@ 
;@@ 
migrationBuilderBB 
.BB 
CreateTableBB (
(BB( )
nameCC 
:CC 
$strCC $
,CC$ %
columnsDD 
:DD 
tableDD 
=>DD !
newDD" %
{EE 
IdFF 
=FF 
tableFF 
.FF 
ColumnFF %
<FF% &
intFF& )
>FF) *
(FF* +
typeFF+ /
:FF/ 0
$strFF1 :
,FF: ;
nullableFF< D
:FFD E
falseFFF K
)FFK L
.GG 

AnnotationGG #
(GG# $
$strGG$ :
,GG: ;
trueGG< @
)GG@ A
,GGA B
PriceHH 
=HH 
tableHH !
.HH! "
ColumnHH" (
<HH( )
floatHH) .
>HH. /
(HH/ 0
typeHH0 4
:HH4 5
$strHH6 <
,HH< =
nullableHH> F
:HHF G
falseHHH M
)HHM N
,HHN O
AmountAlreadyPaidII %
=II& '
tableII( -
.II- .
ColumnII. 4
<II4 5
floatII5 :
>II: ;
(II; <
typeII< @
:II@ A
$strIIB H
,IIH I
nullableIIJ R
:IIR S
falseIIT Y
)IIY Z
,IIZ [
ObservationsJJ  
=JJ! "
tableJJ# (
.JJ( )
ColumnJJ) /
<JJ/ 0
stringJJ0 6
>JJ6 7
(JJ7 8
typeJJ8 <
:JJ< =
$strJJ> D
,JJD E
nullableJJF N
:JJN O
trueJJP T
)JJT U
,JJU V
AgencyUserIdKK  
=KK! "
tableKK# (
.KK( )
ColumnKK) /
<KK/ 0
intKK0 3
>KK3 4
(KK4 5
typeKK5 9
:KK9 :
$strKK; D
,KKD E
nullableKKF N
:KKN O
trueKKP T
)KKT U
,KKU V
DiscriminatorLL !
=LL" #
tableLL$ )
.LL) *
ColumnLL* 0
<LL0 1
stringLL1 7
>LL7 8
(LL8 9
typeLL9 =
:LL= >
$strLL? E
,LLE F
nullableLLG O
:LLO P
falseLLQ V
)LLV W
,LLW X
	StartDateMM 
=MM 
tableMM  %
.MM% &
ColumnMM& ,
<MM, -
DateTimeMM- 5
>MM5 6
(MM6 7
typeMM7 ;
:MM; <
$strMM= C
,MMC D
nullableMME M
:MMM N
trueMMO S
)MMS T
,MMT U
EndDateNN 
=NN 
tableNN #
.NN# $
ColumnNN$ *
<NN* +
DateTimeNN+ 3
>NN3 4
(NN4 5
typeNN5 9
:NN9 :
$strNN; A
,NNA B
nullableNNC K
:NNK L
trueNNM Q
)NNQ R
,NNR S
CarModelOO 
=OO 
tableOO $
.OO$ %
ColumnOO% +
<OO+ ,
stringOO, 2
>OO2 3
(OO3 4
typeOO4 8
:OO8 9
$strOO: @
,OO@ A
nullableOOB J
:OOJ K
trueOOL P
)OOP Q
,OOQ R'
CarRentalReservation_TripIdPP /
=PP0 1
tablePP2 7
.PP7 8
ColumnPP8 >
<PP> ?
intPP? B
>PPB C
(PPC D
typePPD H
:PPH I
$strPPJ S
,PPS T
nullablePPU ]
:PP] ^
truePP_ c
)PPc d
,PPd e
	HotelNameQQ 
=QQ 
tableQQ  %
.QQ% &
ColumnQQ& ,
<QQ, -
stringQQ- 3
>QQ3 4
(QQ4 5
typeQQ5 9
:QQ9 :
$strQQ; A
,QQA B
nullableQQC K
:QQK L
trueQQM Q
)QQQ R
,QQR S
AdressRR 
=RR 
tableRR "
.RR" #
ColumnRR# )
<RR) *
stringRR* 0
>RR0 1
(RR1 2
typeRR2 6
:RR6 7
$strRR8 >
,RR> ?
nullableRR@ H
:RRH I
trueRRJ N
)RRN O
,RRO P
StartingPeriodSS "
=SS# $
tableSS% *
.SS* +
ColumnSS+ 1
<SS1 2
DateTimeSS2 :
>SS: ;
(SS; <
typeSS< @
:SS@ A
$strSSB H
,SSH I
nullableSSJ R
:SSR S
trueSST X
)SSX Y
,SSY Z
EndingPeriodTT  
=TT! "
tableTT# (
.TT( )
ColumnTT) /
<TT/ 0
DateTimeTT0 8
>TT8 9
(TT9 :
typeTT: >
:TT> ?
$strTT@ F
,TTF G
nullableTTH P
:TTP Q
trueTTR V
)TTV W
,TTW X#
HotelReservation_TripIdUU +
=UU, -
tableUU. 3
.UU3 4
ColumnUU4 :
<UU: ;
intUU; >
>UU> ?
(UU? @
typeUU@ D
:UUD E
$strUUF O
,UUO P
nullableUUQ Y
:UUY Z
trueUU[ _
)UU_ `
,UU` a
TicketNumberVV  
=VV! "
tableVV# (
.VV( )
ColumnVV) /
<VV/ 0
stringVV0 6
>VV6 7
(VV7 8
typeVV8 <
:VV< =
$strVV> D
,VVD E
nullableVVF N
:VVN O
trueVVP T
)VVT U
,VVU V
FlightNumberWW  
=WW! "
tableWW# (
.WW( )
ColumnWW) /
<WW/ 0
stringWW0 6
>WW6 7
(WW7 8
typeWW8 <
:WW< =
$strWW> D
,WWD E
nullableWWF N
:WWN O
trueWWP T
)WWT U
,WWU V
DepartureDateXX !
=XX" #
tableXX$ )
.XX) *
ColumnXX* 0
<XX0 1
DateTimeXX1 9
>XX9 :
(XX: ;
typeXX; ?
:XX? @
$strXXA G
,XXG H
nullableXXI Q
:XXQ R
trueXXS W
)XXW X
,XXX Y
ArrivalDateYY 
=YY  !
tableYY" '
.YY' (
ColumnYY( .
<YY. /
DateTimeYY/ 7
>YY7 8
(YY8 9
typeYY9 =
:YY= >
$strYY? E
,YYE F
nullableYYG O
:YYO P
trueYYQ U
)YYU V
,YYV W
DepartingFromZZ !
=ZZ" #
tableZZ$ )
.ZZ) *
ColumnZZ* 0
<ZZ0 1
stringZZ1 7
>ZZ7 8
(ZZ8 9
typeZZ9 =
:ZZ= >
$strZZ? E
,ZZE F
nullableZZG O
:ZZO P
trueZZQ U
)ZZU V
,ZZV W

ArrivingAt[[ 
=[[  
table[[! &
.[[& '
Column[[' -
<[[- .
string[[. 4
>[[4 5
([[5 6
type[[6 :
:[[: ;
$str[[< B
,[[B C
nullable[[D L
:[[L M
true[[N R
)[[R S
,[[S T
TripId\\ 
=\\ 
table\\ "
.\\" #
Column\\# )
<\\) *
int\\* -
>\\- .
(\\. /
type\\/ 3
:\\3 4
$str\\5 >
,\\> ?
nullable\\@ H
:\\H I
true\\J N
)\\N O
}]] 
,]] 
constraints^^ 
:^^ 
table^^ "
=>^^# %
{__ 
table`` 
.`` 

PrimaryKey`` $
(``$ %
$str``% 6
,``6 7
x``8 9
=>``: <
x``= >
.``> ?
Id``? A
)``A B
;``B C
tableaa 
.aa 

ForeignKeyaa $
(aa$ %
namebb 
:bb 
$strbb H
,bbH I
columncc 
:cc 
xcc  !
=>cc" $
xcc% &
.cc& '
AgencyUserIdcc' 3
,cc3 4
principalTabledd &
:dd& '
$strdd( 5
,dd5 6
principalColumnee '
:ee' (
$stree) -
,ee- .
onDeleteff  
:ff  !
ReferentialActionff" 3
.ff3 4
Restrictff4 <
)ff< =
;ff= >
tablegg 
.gg 

ForeignKeygg $
(gg$ %
namehh 
:hh 
$strhh Q
,hhQ R
columnii 
:ii 
xii  !
=>ii" $
xii% &
.ii& ''
CarRentalReservation_TripIdii' B
,iiB C
principalTablejj &
:jj& '
$strjj( /
,jj/ 0
principalColumnkk '
:kk' (
$strkk) -
,kk- .
onDeletell  
:ll  !
ReferentialActionll" 3
.ll3 4
Restrictll4 <
)ll< =
;ll= >
tablemm 
.mm 

ForeignKeymm $
(mm$ %
namenn 
:nn 
$strnn M
,nnM N
columnoo 
:oo 
xoo  !
=>oo" $
xoo% &
.oo& '#
HotelReservation_TripIdoo' >
,oo> ?
principalTablepp &
:pp& '
$strpp( /
,pp/ 0
principalColumnqq '
:qq' (
$strqq) -
,qq- .
onDeleterr  
:rr  !
ReferentialActionrr" 3
.rr3 4
Restrictrr4 <
)rr< =
;rr= >
tabless 
.ss 

ForeignKeyss $
(ss$ %
namett 
:tt 
$strtt <
,tt< =
columnuu 
:uu 
xuu  !
=>uu" $
xuu% &
.uu& '
TripIduu' -
,uu- .
principalTablevv &
:vv& '
$strvv( /
,vv/ 0
principalColumnww '
:ww' (
$strww) -
,ww- .
onDeletexx  
:xx  !
ReferentialActionxx" 3
.xx3 4
Restrictxx4 <
)xx< =
;xx= >
}yy 
)yy 
;yy 
migrationBuilder{{ 
.{{ 
CreateIndex{{ (
({{( )
name|| 
:|| 
$str|| 4
,||4 5
table}} 
:}} 
$str}} %
,}}% &
column~~ 
:~~ 
$str~~ &
)~~& '
;~~' (
migrationBuilder
ÄÄ 
.
ÄÄ 
CreateIndex
ÄÄ (
(
ÄÄ( )
name
ÅÅ 
:
ÅÅ 
$str
ÅÅ C
,
ÅÅC D
table
ÇÇ 
:
ÇÇ 
$str
ÇÇ %
,
ÇÇ% &
column
ÉÉ 
:
ÉÉ 
$str
ÉÉ 5
)
ÉÉ5 6
;
ÉÉ6 7
migrationBuilder
ÖÖ 
.
ÖÖ 
CreateIndex
ÖÖ (
(
ÖÖ( )
name
ÜÜ 
:
ÜÜ 
$str
ÜÜ ?
,
ÜÜ? @
table
áá 
:
áá 
$str
áá %
,
áá% &
column
àà 
:
àà 
$str
àà 1
)
àà1 2
;
àà2 3
migrationBuilder
ää 
.
ää 
CreateIndex
ää (
(
ää( )
name
ãã 
:
ãã 
$str
ãã .
,
ãã. /
table
åå 
:
åå 
$str
åå %
,
åå% &
column
çç 
:
çç 
$str
çç  
)
çç  !
;
çç! "
migrationBuilder
èè 
.
èè 
CreateIndex
èè (
(
èè( )
name
êê 
:
êê 
$str
êê 0
,
êê0 1
table
ëë 
:
ëë 
$str
ëë 
,
ëë 
column
íí 
:
íí 
$str
íí )
)
íí) *
;
íí* +
migrationBuilder
îî 
.
îî 
CreateIndex
îî (
(
îî( )
name
ïï 
:
ïï 
$str
ïï '
,
ïï' (
table
ññ 
:
ññ 
$str
ññ 
,
ññ 
column
óó 
:
óó 
$str
óó  
)
óó  !
;
óó! "
}
òò 	
	protected
öö 
override
öö 
void
öö 
Down
öö  $
(
öö$ %
MigrationBuilder
öö% 5
migrationBuilder
öö6 F
)
ööF G
{
õõ 	
migrationBuilder
úú 
.
úú 
	DropTable
úú &
(
úú& '
name
ùù 
:
ùù 
$str
ùù $
)
ùù$ %
;
ùù% &
migrationBuilder
üü 
.
üü 
	DropTable
üü &
(
üü& '
name
†† 
:
†† 
$str
†† #
)
††# $
;
††$ %
migrationBuilder
¢¢ 
.
¢¢ 
	DropTable
¢¢ &
(
¢¢& '
name
££ 
:
££ 
$str
££ 
)
££ 
;
££ 
migrationBuilder
•• 
.
•• 
	DropTable
•• &
(
••& '
name
¶¶ 
:
¶¶ 
$str
¶¶ 
)
¶¶ 
;
¶¶ 
}
ßß 	
}
®® 
}©© ù
MC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\AgencyUser.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public 

class 

AgencyUser 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
String 
Name 
{ 
get  
;  !
set" %
;% &
}' (
List 
< 
Reservation 
> 
Reservations &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 

AgencyUser 
( 
) 
{ 	
Reservations 
= 
new 
List #
<# $
Reservation$ /
>/ 0
(0 1
)1 2
;2 3
} 	
} 
} ﬁ
WC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\CarRentalReservation.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public		 

class		  
CarRentalReservation		 %
:		% &
Reservation		' 2
{

 
public 
DateTime 
	StartDate !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
EndDate 
{  !
get" %
;% &
set' *
;* +
}, -
public 
String 
CarModel 
{  
get! $
;$ %
set& )
;) *
}+ ,
public  
CarRentalReservation #
(# $
)$ %
:& '
base( ,
(, -
)- .
{/ 0
}1 2
} 
} ˜
SC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\HotelReservation.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public		 

class		 
HotelReservation		 !
:		! "
Reservation		# .
{

 
public 
String 
	HotelName 
{  !
get" %
;% &
set' *
;* +
}, -
public 
String 
Adress 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
StartingPeriod &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
DateTime 
EndingPeriod $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
HotelReservation 
(  
)  !
:" #
base$ (
(( )
)) *
{+ ,
}, -
} 
} œ
YC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\PlaneTicketReservation.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public		 

class		 "
PlaneTicketReservation		 '
:		' (
Reservation		) 4
{

 
public 
String 
TicketNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
String 
FlightNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
DateTime 
DepartureDate %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
ArrivalDate #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
String 
DepartingFrom #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
String 

ArrivingAt  
{! "
get# &
;& '
set( +
;+ ,
}- .
public "
PlaneTicketReservation %
(% &
)& '
:' (
base) -
(- .
). /
{0 1
}2 3
} 
} ë
_C:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\RequestWrappers\LoginRequest.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
. 
RequestWrappers .
{ 
public		 

class		 
LoginRequest		 
{

 
public 
bool 
Create 
{ 
get  
;  !
set" %
;% &
}' (
[ 	
Required	 
] 
public 
String 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
String 
Username 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ç	
NC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\Reservation.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public 

class 
Reservation 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
Trip 
Trip 
; 
public 
float 
Price 
{ 
get  
;  !
set" %
;% &
}' (
public 
float 
AmountAlreadyPaid &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
String 
Observations "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

AgencyUser 
? 

AgencyUser %
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} íH
XC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\ReservationsDbContext.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{		 
public

 

class

 !
ReservationsDbContext

 &
:

& '
	DbContext

( 1
{ 
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 

AgencyUser 
>  
AgencyUsers! ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
DbSet 
< 
TravellerUser "
>" #
TravellerUsers$ 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 
DbSet 
<  
CarRentalReservation )
>) *!
CarRentalReservations+ @
{A B
getC F
;F G
setH K
;K L
}M N
public 
DbSet 
< 
HotelReservation %
>% &
HotelReservations' 8
{9 :
get; >
;> ?
set@ C
;C D
}E F
public 
DbSet 
< "
PlaneTicketReservation +
>+ ,#
PlaneTicketReservations- D
{E F
getG J
;J K
setL O
;O P
}Q R
public 
DbSet 
< 
Reservation  
>  !
Reservations" .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
DbSet 
< 
Trip 
> 
Trips  
{! "
get# &
;& '
set( +
;+ ,
}- .
public !
ReservationsDbContext $
($ %
[% &
NotNullAttribute& 6
]6 7
DbContextOptions8 H
optionsI P
)P Q
:R S
baseT X
(X Y
optionsY `
)` a
{ 	
Database 
. 
EnsureCreated "
(" #
)# $
;$ %
} 	
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
{ 	
optionsBuilder 
. 
	UseSqlite $
($ %
$str% C
)C D
;D E
} 	
public 
TravellerUser 
GetUser $
($ %
String% +
username, 4
)4 5
{ 	
TravellerUser   
usr   
=   
TravellerUsers    .
.  . /
ToList  / 5
(  5 6
)  6 7
.  7 8
Find  8 <
(  < =
usr  = @
=>  A C
usr  D G
.  G H
UserName  H P
==  Q S
username  T \
)  \ ]
;  ] ^
if!! 
(!! 
usr!! 
==!! 
null!! 
)!! 
{"" 
throw## %
InvalidOperationException## /
(##/ 0
$str##0 E
)##E F
;##F G
}$$ 
return%% 
usr%% 
;%% 
}&& 	
public(( 
void(( 
CreateTravellerUser(( '
(((' (
String((( .
apiKey((/ 5
,((5 6
String((7 =
reservationHash((> M
,((M N
String((O U
	loginHash((V _
,((_ `
String((a g
username((h p
)((p q
{)) 	
if** 
(** 
TravellerUsers** 
.** 
ToList** $
(**$ %
)**% &
.**& '
Find**' +
(**+ ,
usr**, /
=>**0 2
usr**3 6
.**6 7
UserName**7 ?
==**@ B
username**C K
)**K L
!=**M O
null**P T
)**T U
{++ 
throw,, %
InvalidOperationException,, /
(,,/ 0
$str,,0 C
),,C D
;,,D E
}-- 
TravellerUser.. 
usr.. 
=.. 
new..  #
(..# $
)..$ %
{// 
	LoginHash00 
=00 
	loginHash00 %
,00% &
ApiKey11 
=11 
apiKey11 
,11  
UserName22 
=22 
username22 #
,22# $
ReservationHash33 
=33  !
reservationHash33" 1
,331 2
Trips44 
=44 
new44 
List44  
<44  !
Trip44! %
>44% &
(44& '
)44' (
}55 
;55 
TravellerUsers66 
.66 
Add66 
(66 
usr66 "
)66" #
;66# $
this77 
.77 
SaveChanges77 
(77 
)77 
;77 
}88 	
private:: 
	Exception:: %
InvalidOperationException:: 3
(::3 4
string::4 :
v::; <
)::< =
{;; 	
throw<< 
new<< #
NotImplementedException<< -
(<<- .
)<<. /
;<</ 0
}== 	
public?? 
void?? 

CreateTrip?? 
(?? 
int?? "
	forUserId??# ,
,??, -
String??. 4
tripName??5 =
)??= >
{@@ 	
TripAA 
tripAA 
=AA 
newAA 
(AA 
)AA 
{BB 
TripNameCC 
=CC 
tripNameCC #
,CC# $
HotelReservationsDD !
=DD" #
newDD$ '
ListDD( ,
<DD, -
HotelReservationDD- =
>DD= >
(DD> ?
)DD? @
,DD@ A!
CarRentalReservationsEE %
=EE& '
newEE( +
ListEE, 0
<EE0 1 
CarRentalReservationEE1 E
>EEE F
(EEF G
)EEG H
,EEH I#
PlaneTicketReservationsFF '
=FF( )
newFF* -
ListFF. 2
<FF2 3"
PlaneTicketReservationFF3 I
>FFI J
(FFJ K
)FFK L
,FFL M
}GG 
;GG 
TravellerUserHH 
usrHH 
=HH 
TravellerUsersHH  .
.HH. /
ToListHH/ 5
(HH5 6
)HH6 7
.HH7 8
FindHH8 <
(HH< =
usrHH= @
=>HHA C
usrHHD G
.HHG H
IdHHH J
==HHK M
	forUserIdHHN W
)HHW X
;HHX Y
usrII 
.II 
TripsII 
.II 
AddII 
(II 
tripII 
)II 
;II  
thisJJ 
.JJ 
SaveChangesJJ 
(JJ 
)JJ 
;JJ 
}KK 	
publicMM 
voidMM %
AddHotelReservationToTripMM -
(MM- .
intNN 
	forTripIdNN 
,NN 
StringOO 
	hotelNameOO 
,OO 
DateTimePP 
	startDatePP 
,PP 
DateTimeQQ 
endDateQQ 
,QQ 
StringRR 
adressRR 
,RR 
floatSS 
priceSS 
,SS 
floatTT 
amountAlreadyPaidTT #
,TT# $

AgencyUserUU 

agencyUserUU !
=UU" #
nullUU$ (
,UU( )
StringVV 
observationsVV 
=VV  !
$strVV" $
)VV$ %
{WW 	
HotelReservationXX 
hrsXX  
=XX! "
newXX# &
(XX& '
)XX' (
{YY 
PriceZZ 
=ZZ 
priceZZ 
,ZZ 
AmountAlreadyPaid[[ !
=[[" #
amountAlreadyPaid[[$ 5
,[[5 6
Observations\\ 
=\\ 
observations\\ +
,\\+ ,

AgencyUser]] 
=]] 

agencyUser]] '
,]]' (
StartingPeriod^^ 
=^^  
	startDate^^! *
,^^* +
EndingPeriod__ 
=__ 
endDate__ &
,__& '
Adress`` 
=`` 
adress`` 
,``  
	HotelNameaa 
=aa 
	hotelNameaa %
}bb 
;bb 
varcc 
tripcc 
=cc 
Tripscc 
.cc 
ToListcc #
(cc# $
)cc$ %
.cc% &
Findcc& *
(cc* +
trcc+ -
=>cc. 0
trcc1 3
.cc3 4
Idcc4 6
==cc7 9
	forTripIdcc: C
)ccC D
;ccD E
tripdd 
.dd 
HotelReservationsdd "
.dd" #
Adddd# &
(dd& '
hrsdd' *
)dd* +
;dd+ ,
}ee 	
}gg 
}hh ∂
hC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\ResponseWrappers\LoginResponseWrapper.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public		 

class		  
LoginResponseWrapper		 %
{

 
public 
int 
ResponseCode 
{  !
get" %
;% &
set' *
;* +
}, -
public 
String 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
String 
ApiKey 
{ 
get "
;" #
set$ '
;' (
}) *
public 
String 
ReservationKey $
{% &
get' *
;* +
set, /
;/ 0
}1 2
} 
} ˙	
PC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\TravellerUser.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public		 

class		 
TravellerUser		 
:		  
User		! %
{

 
[ 	
Required	 
] 
public 
String 
ReservationHash %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Required	 
] 
public 
List 
< 
Trip 
> 
Trips 
{  !
get" %
;% &
set' *
;* +
}, -
public 
TravellerUser 
( 
) 
: 
base  $
($ %
)% &
{' (
Trips 
= 
new 
List 
< 
Trip !
>! "
(" #
)# $
;$ %
} 	
public 
String 
UserName 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} ß
GC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\Trip.cs
	namespace 	
TheRoadWarrior
 
. 
Model 
{ 
public 

class 
Trip 
{		 
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
User 
User 
{ 
get 
; 
set  #
;# $
}% &
public 
List 
<  
CarRentalReservation (
>( )!
CarRentalReservations* ?
{@ A
getB E
;E F
setG J
;J K
}L M
public 
List 
< 
HotelReservation $
>$ %
HotelReservations& 7
{8 9
get: =
;= >
set? B
;B C
}D E
public 
List 
< "
PlaneTicketReservation *
>* +#
PlaneTicketReservations, C
{D E
getF I
;I J
setK N
;N O
}P Q
public 
String 
TripName 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
Trip 
( 
) 
{ 	!
CarRentalReservations !
=" #
new$ '
List( ,
<, - 
CarRentalReservation- A
>A B
(B C
)C D
;D E
HotelReservations 
= 
new  #
List$ (
<( )
HotelReservation) 9
>9 :
(: ;
); <
;< =#
PlaneTicketReservations #
=$ %
new& )
List* .
<. /"
PlaneTicketReservation/ E
>E F
(F G
)G H
;H I
} 	
} 
} µ
GC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Model\User.cs
	namespace 	
TheRoadWarrior
 
{ 
public		 

class		 
User		 
{

 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
String 
ApiKey 
{ 
get "
;" #
set$ '
;' (
}) *
public 
String 
	LoginHash 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} †

DC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Program.cs
	namespace

 	
TheRoadWarrior


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} Ë
DC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\Startup.cs
	namespace 	
TheRoadWarrior
 
{ 
public 

class 
Startup 
{ 
public 
Startup 
( 
IConfiguration %
configuration& 3
)3 4
{ 	
Configuration 
= 
configuration )
;) *
} 	
public 
IConfiguration 
Configuration +
{, -
get. 1
;1 2
}3 4
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
AddControllers #
(# $
)$ %
;% &
services 
. 
AddSwaggerGen "
(" #
)# $
;$ %
services   
.   
AddDbContext   !
<  ! "!
ReservationsDbContext  " 7
>  7 8
(  8 9
options  9 @
=>  A C
{  D E
options!! 
.!! 
	UseSqlite!! !
(!!! "
this!!" &
.!!& '
Configuration!!' 4
.!!4 5
GetConnectionString!!5 H
(!!H I
$str!!I \
)!!\ ]
)!!] ^
;!!^ _
}"" 
)"" 
;"" 
}## 	
public&& 
void&& 
	Configure&& 
(&& 
IApplicationBuilder&& 1
app&&2 5
,&&5 6
IWebHostEnvironment&&7 J
env&&K N
)&&N O
{'' 	
if(( 
((( 
env(( 
.(( 
IsDevelopment(( !
(((! "
)((" #
)((# $
{)) 
app** 
.** %
UseDeveloperExceptionPage** -
(**- .
)**. /
;**/ 0
}++ 
app-- 
.-- 

UseSwagger-- 
(-- 
)-- 
;-- 
app// 
.// 
UseSwaggerUI// 
(// 
c// 
=>// !
{00 
c11 
.11 
SwaggerEndpoint11 !
(11! "
$str11" <
,11< =
$str11> Q
)11Q R
;11R S
}22 
)22 
;22 
app44 
.44 
UseHttpsRedirection44 #
(44# $
)44$ %
;44% &
app66 
.66 

UseRouting66 
(66 
)66 
;66 
app88 
.88 
UseAuthorization88  
(88  !
)88! "
;88" #
app:: 
.:: 
UseEndpoints:: 
(:: 
	endpoints:: &
=>::' )
{;; 
	endpoints<< 
.<< 
MapControllerRoute<< ,
(<<, -
name== 
:== 
$str== #
,==# $
pattern>> 
:>> 
$str>> E
)>>E F
;>>F G
}?? 
)?? 
;?? 
}@@ 	
}AA 
}BB ‘
LC:\UAIC\.NET\TheRoadWarrior\TheRoadWArrior\TheRoadWarrior\WeatherForecast.cs
	namespace 	
TheRoadWarrior
 
{ 
public 

class 
WeatherForecast  
{ 
public 
DateTime 
Date 
{ 
get "
;" #
set$ '
;' (
}) *
public		 
int		 
TemperatureC		 
{		  !
get		" %
;		% &
set		' *
;		* +
}		, -
public 
int 
TemperatureF 
=>  "
$num# %
+& '
(( )
int) ,
), -
(- .
TemperatureC. :
/; <
$num= C
)C D
;D E
public 
string 
Summary 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} 